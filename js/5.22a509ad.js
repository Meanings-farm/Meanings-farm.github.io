(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0856":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return c}));var n=a("3eea"),s=a.n(n),i=a("f71e"),o=a.n(i);function r(t){let e="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}function l(t,e,a){const{queryId:n,pageId:s}=e,i=t[n],o=i&&i[s],r=o&&o.ids;return r&&r.length?r.map((t=>a[t])):[]}function c(t={},e={}){const a=t.query||{},n=t.qid||"default",i=null!==e.limit&&void 0!==e.limit?e.limit:a.$limit,r=null!==e.skip&&void 0!==e.skip?e.skip:a.$skip,l=s()(a,["$limit","$skip"]),c=o()(l),u=void 0!==i?{$limit:i,$skip:r}:void 0,d=u?o()(u):void 0;return{qid:n,query:a,queryId:c,queryParams:l,pageParams:u,pageId:d,response:void 0,isOutdated:void 0}}},1799:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{flat:"",icon:"navigate_before",disabled:!t.havePrev},on:{click:function(e){t.goTo("/sumerian/line/",(t.prev||{}).id)}}}),a("q-btn",{attrs:{flat:"",icon:"reorder",disabled:!t.haveCorpusId},on:{click:function(e){return t.goTo("/text/",t.corpusId)}}}),a("q-btn",{attrs:{flat:"",icon:"navigate_next",disabled:!t.haveNext},on:{click:function(e){t.goTo("/sumerian/line/",(t.next||{}).id)}}})],1)},s=[],i=a("e4fd"),o=a("7944"),r={name:"Pagination",props:{corpusId:{type:String,required:!1},currentId:{type:String,required:!1}},setup(t,e){const{List:a}=e.root.$FeathersVuex.api,{$router:n}=e.root,s=Object(i["computed"])((()=>t.corpusId)),r=Object(i["computed"])((()=>void 0!==c.value)),{items:l}=Object(o["a"])({model:a,params:Object(i["computed"])((()=>({query:{id:s.value,$sort:{createdAt:1},$limit:1}}))),queryWhen:Object(i["computed"])((()=>s.value))}),c=Object(i["computed"])((()=>t.currentId)),u=Object(i["computed"])((()=>{const t=c.value;if(t){var e;const a=(l.value||[])[0];if(a&&a.items){const n=a.items;for(const a in n){const s=n[a];if(s.id===t)return e;e=s}}}})),d=Object(i["computed"])((()=>void 0!==u.value)),p=Object(i["computed"])((()=>{const t=c.value;if(t){var e=!1;const a=(l.value||[])[0];if(a&&a.items){const n=a.items;for(const a in n){const s=n[a];if(e)return s;s.id===t&&(e=!0)}}}})),f=Object(i["computed"])((()=>void 0!==p.value)),m=(t,e)=>{n.push({path:t+e})};return{haveCorpusId:r,havePrev:d,prev:u,haveNext:f,next:p,goTo:m}}},l=r,c=a("2877"),u=a("9c40"),d=a("eebe"),p=a.n(d),f=Object(c["a"])(l,n,s,!1,null,null,null);e["a"]=f.exports;p()(f,"components",{QBtn:u["a"]})},5416:function(t,e,a){"use strict";a("586c")},"586c":function(t,e,a){},7944:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("e4fd"),s=a("b047"),i=a.n(s),o=a("0856");const r=t=>Object(n["isRef"])(t)?t.value:t;function l(t){const e={model:null,params:null,qid:"default",queryWhen:Object(n["computed"])((()=>!0)),local:!1,immediate:!0,onEmpty:null},{model:a,params:s,queryWhen:l,qid:c,local:u,immediate:d,onEmpty:p}=Object.assign({},e,t),f=e=>{const a=r(e);if(a)return a;const n=r(t.fetchParams);if(n)return n;const s=r(t.params);return s||void 0},m=Object(n["reactive"])({qid:c||"",isPending:!1,haveBeenRequested:!1,haveLoaded:u||!1,error:null,debounceTime:0,latestQuery:null,isLocal:u||!1}),v={items:Object(n["computed"])((()=>{const t=r(s);if(a&&t){if(t.paginate){const e=a.store.state[a.servicePath],{defaultSkip:n,defaultLimit:s}=e.pagination,i=t.query||{},r=i.$skip||n,l=i.$limit||s,c=v.paginationData.value[t.qid||m.qid]||{},u=null!=r&&null!=l?{limit:l,skip:r}:{},d=Object(o["b"])(t,u),p=Object(o["a"])(c,d,e.keyedById);return console.log("items",p),p}{const e=a.findInStore(t).data;return e}}return[]})),paginationData:Object(n["computed"])((()=>{if(a)return a.store.state[a.servicePath].pagination})),servicePath:Object(n["computed"])((()=>(a||{}).servicePath||""))};function b(t){if(a&&t){const e=r(t);if(e&&l&&l.value&&!m.isLocal)return m.isPending=!0,m.haveBeenRequested=!0,a.find(e).then((t=>{if(m.error=null,m.haveLoaded=!0,!Array.isArray(t)){const a=Object(o["b"])(e,t);a.response=t,a.isOutdated=!1,m.latestQuery=a}return m.isPending=!1,0==t.total&&p&&p(),t}))}}const h={findDebounced(t){return b(t)}};function g(t){const e=f(t);return e&&e.debounce?(e.debounce!==m.debounceTime&&(h.findDebounced=i()(b,e.debounce),m.debounceTime=e.debounce),h.findDebounced(e)):e?b(e):void 0}return Object(n["watch"])((()=>f()),(()=>{g()}),{immediate:d}),Object.assign(Object.assign(Object.assign({},v),Object(n["toRefs"])(m)),{find:b})}},"8bf9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row justify-center"},[a("q-btn",{attrs:{flat:"",round:"",icon:"edit",color:t.state.editable?"primary":"secondary"},on:{click:function(e){t.state.editable=!t.state.editable}}}),a("q-space"),a("Pagination",{attrs:{corpusId:t.state.corpusId,currentId:t.state.lineId}}),a("q-space"),a("q-btn-toggle",{attrs:{"no-caps":"",rounded:"",unelevated:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"rus",value:"rus"},{label:"eng",value:"eng"}]},on:{input:function(e){return t.switchLang(e)}},model:{value:t.state.language3,callback:function(e){t.$set(t.state,"language3",e)},expression:"state.language3"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-7"},[a("div",{staticClass:"row full-width bg-grey-4"},[a("small",[t._v("\n          "+t._s(t.$t("translation"))+"\n        ")]),a("div",{ref:"target",staticClass:"fit text-body1"},[t._v("\n          "+t._s(t.tv.text||"")+"\n        ")]),a("q-popup-edit",{on:{save:function(e,a){return t.updateTv(e,a)}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.set,s=e.cancel;return[a("q-input",{attrs:{color:"accent",dense:"",autofocus:""},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle"},on:{click:function(t){return t.stopPropagation(),n(t)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),s(t)}}})]},proxy:!0}],null,!0),model:{value:t.tv.text,callback:function(e){t.$set(t.tv,"text",e)},expression:"tv.text"}})]}}]),model:{value:t.tv.text,callback:function(e){t.$set(t.tv,"text",e)},expression:"tv.text"}})],1),a("div",{staticClass:"row full-width q-py-sm"},[t._v("\n        "+t._s(t.$t("line"))+"# "+t._s(t.state.lineNumber)+"\n      ")]),a("div",{staticClass:"row full-width q-pb-sm"},[a("small",[t._v("\n          "+t._s(t.$t("cuneiform"))+"\n        ")]),a("div",{staticClass:"fit text-h5",attrs:{filled:""}},t._l(Array.from(t.state.original||""),(function(e,n){return a("span",{key:n,class:{selected:t.isCuneiformHighlighted(n)}},[t._v("\n            "+t._s(e)+"\n          ")])})),0),a("q-popup-edit",{on:{save:function(e,a){return t.updateCuneiform(e,a)}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.set,s=e.cancel;return[a("q-input",{attrs:{color:"accent text-h5",dense:"",autofocus:"",value:t.state.cuneiform||t.state.original||""},on:{input:function(e){return t.state.cuneiform=e}},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"edit"},on:{click:n}}),a("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),s(t)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"",icon:"local_fire_department"},on:{click:function(e){t.resetTransliteration(),s()}}})]},proxy:!0}],null,!0)})]}}]),model:{value:t.state.cuneiform,callback:function(e){t.$set(t.state,"cuneiform",e)},expression:"state.cuneiform"}})],1),a("q-separator"),a("div",{staticClass:"row full-width bg-grey-4"},[a("small",[t._v("\n          "+t._s(t.$t("transliteration"))+"\n        ")]),a("div",{ref:"target",staticClass:"fit text-body1"},[t._v("\n          "+t._s(t.transliteration)+"\n        ")]),a("q-popup-edit",{attrs:{value:(t.state.translation||{}).transliteration||""},on:{save:function(e,a){return t.updateTransliteration(e,a)},"before-show":function(e){t.state.transliteration=(t.state.translation||{}).transliteration||""}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.set,s=e.cancel;return[a("q-input",{attrs:{color:"accent",dense:"",autofocus:""},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle"},on:{click:function(t){return t.stopPropagation(),n(t)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),s(t)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"",icon:"local_fire_department"},on:{click:function(e){t.resetTransliteration(),s()}}})]},proxy:!0}],null,!0),model:{value:t.state.transliteration,callback:function(e){t.$set(t.state,"transliteration",e)},expression:"state.transliteration"}})]}}]),model:{value:t.state.transliteration,callback:function(e){t.$set(t.state,"transliteration",e)},expression:"state.transliteration"}})],1),a("q-separator"),t._l(t.translation.details||[],(function(e,n){return[a("span",{key:n,on:{mouseover:function(a){t.state.over=e},mouseleave:function(e){t.state.over=""}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t.state.editable?a("FeathersVuexFindOrDefault",{attrs:{service:"variations",query:{symbols:e.cuneiform.text,language:"sumerian"},fetchQuery:{symbols:e.cuneiform.text,language:"sumerian"},watch:["query.symbols"]},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.items;return[a("Pass",{attrs:{option:(s||[])[0]||{}},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.option;return a("q-btn",{attrs:{flat:"",label:""}},[a("q-badge",{attrs:{color:"orange",outline:""}},[t._v(t._s((s.splits||[]).length))]),a("q-menu",{attrs:{"auto-close":""}},[a("q-list",{staticStyle:{"min-width":"100px"}},t._l(s.splits,(function(n,i){return a("q-item",{key:i,attrs:{clickable:""},on:{click:function(a){return t.splitBy(n,e,s.transliterations)}}},[a("q-item-section",[a("span",[t._v(t._s(t.arrayToVisual(n)))]),t._l(n,(function(e,n){return a("span",{key:n},[t._v("\n                                  "+t._s(t.label((((s.meanings[e]||{}).trans||{})[0]||{}).labels))+"\n                                ")])}))],2)],1)})),1)],1)],1)}}],null,!0)})]}}],null,!0)}):t._e()],1),a("div",{staticClass:"col-2 text-body1 cursor-pointer",class:{warning:t.checkForError(e)},on:{click:function(a){t.state.position={data:e,pos:n,type:"root"}}}},[a("span",{staticClass:"text-body1",class:{selected:t.state.position.data===e},domProps:{innerHTML:t._s(t.formatLemma(e))}})]),a("div",{staticClass:"col-1 text-body1"},[t._v("\n                  "+t._s(e.data.allPc)),a("sub",[t._v(t._s(e.data.allPcTotal))])]),a("div",{staticClass:"col-1 text-body1"},[e.pos?a("span",[t._v(t._s(e.pos)+" "),a("small",[t._v(t._s(e.data.pc))])]):t._e()]),a("div",{staticClass:"col-auto text-body1"},[a("span",{staticClass:"text-body1"},[t._v("\n                    "+t._s(t.label(e.data.sense,e.label))+"\n                  ")]),t.translation?a("FeathersVuexFormWrapper",{attrs:{item:t.translation,watch:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.clone,i=e.save;return[a("q-popup-edit",{on:{"before-show":function(e){return t.checkLabel(s.details[n])},save:function(t,e){return i()}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.initialValue,o=e.value,r=e.validate,l=e.set,c=e.cancel;return[a("q-input",{attrs:{color:"accent",dense:"",autofocus:"",counter:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-btn",{attrs:{flat:"",dense:"",color:"negative",icon:"cancel"},on:{click:function(t){return t.stopPropagation(),c(t)}}}),a("q-btn",{attrs:{flat:"",dense:"",color:"positive",icon:"check_circle",disable:!1===r(o)||i===o},on:{click:function(t){return t.stopPropagation(),l(t)}}})]},proxy:!0}],null,!0),model:{value:s.details[n].label,callback:function(e){t.$set(s.details[n],"label",e)},expression:"clone.details[i1].label"}}),a("div",{staticClass:"q-gutter-sm"},[a("q-radio",{attrs:{val:"N",label:"N"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"GN",label:"GN"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"AJ",label:"AJ"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"V/t",label:"V/t"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"V/i",label:"V/i"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"IP",label:"IP"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"QP",label:"QP"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}}),a("q-radio",{attrs:{val:"",label:"n/a"},model:{value:s.details[n].pos,callback:function(e){t.$set(s.details[n],"pos",e)},expression:"clone.details[i1].pos"}})],1)]}}],null,!0),model:{value:s.details[n].label,callback:function(e){t.$set(s.details[n],"label",e)},expression:"clone.details[i1].label"}})]}}],null,!0)}):t._e()],1)]),a("FeathersVuexFindOrDefault",{attrs:{service:"morphology",query:{word:e.text,lemma:e.lemma,pos:e.pos,language:"sumerian"},fetchQuery:{word:e.text,lemma:e.lemma,pos:e.pos,language:"sumerian"},watch:["query.word","query.lemma","query.pos"]},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.items;return[(n||[]).length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"}),a("div",{staticClass:"col-7 text-body1"},t._l(n||[],(function(e,n){return a("div",{key:n,staticClass:"row"},[a("div",{staticClass:"col-3 cursor-pointer",on:{click:function(a){t.state.position={data:e,pos:n,type:"*fix"}}}},[a("span",{staticClass:"text-body1"},[t._v("\n                          "+t._s(e.text)+"\n                        ")])]),a("div",{staticClass:"col text-body1"},t._l(e.meanings||[],(function(n,s){return a("div",{key:s,staticClass:"row"},[e.meanings.length>1?[t._v("•")]:t._e(),t._v("\n                          "+t._s(t.phLabel(n).value)+"\n                        ")],2)})),0)])})),0)]):t._e()]}}],null,!0)}),a("q-separator")],1)]}))],2),a("div",{staticClass:"col-5"},[a("q-scroll-area",{staticStyle:{height:"110px","max-width":"100%"}},[a("q-list",{staticStyle:{"min-width":"100px"},attrs:{dense:""}},t._l((t.roots[0]||{}).roots,(function(e,n){return a("q-item",{key:n,attrs:{clickable:""},on:{click:function(a){return t.selectRoot(e)}}},[a("q-item-section",{staticClass:"text-body1"},[t._v("\n              "+t._s(e.symbols)+" - "+t._s(t.label(((((e||{}).meaning||{}).trans||[])[0]||{}).labels))+"\n            ")])],1)})),1)],1),a("q-tabs",{staticClass:"text-grey bg-grey-3",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:t.state.tab,callback:function(e){t.$set(t.state,"tab",e)},expression:"state.tab"}},[a("q-tab",{attrs:{name:"visual",label:t.$t("vocablary")}},[a("q-badge",{attrs:{color:"red",floating:""}},[t._v(t._s(t.visualVariants.length))])],1)],1),a("q-tab-panels",{attrs:{animated:"",swipeable:"",vertical:"","transition-prev":"jump-right","transition-next":"jump-left"},model:{value:t.state.tab,callback:function(e){t.$set(t.state,"tab",e)},expression:"state.tab"}},[a("q-tab-panel",{attrs:{name:"visual"}},[a("q-scroll-area",{staticStyle:{height:"500px","max-width":"100%"}},t._l(t.visualVariants,(function(e,n){return a("div",{key:n,staticClass:"row"},[a("div",{staticClass:"col-3 text-body1"},[a("q-separator"),t._v("\n                "+t._s(e.lemma)+" "+t._s(e.pos)+" "),a("div",[a("a",{staticClass:"cursor-pointer",on:{click:function(a){return t.openSearch(e.visual)}}},[t._v(t._s(e.visual))]),t._v(" "+t._s(e.normaliazed)+" ")]),t._l(e.dates||[],(function(e,n){return a("small",{key:n,staticClass:"row"},["UrIII"===e.k||"OB"===e.k?a("b",[t._v("\n                    "+t._s(e.k)+" "+t._s(e.v)+"\n                  ")]):a("span",[t._v("\n                    "+t._s(e.k)+" "+t._s(e.v)+"\n                  ")])])}))],2),a("div",{staticClass:"col text-body1"},[a("q-separator"),t._l(e.trans,(function(n,s){return a("div",{key:s,staticClass:"row cursor-pointer",on:{click:function(a){return t.selectTranslation(e,n)}}},[t._v("\n                  "+t._s(t.label(n.labels))+"\n                  "),n.count?a("span",[t._v("   "+t._s(n.count)+" / "+t._s(t.pcToString(n.pc))+"%")]):t._e()])}))],2)])})),0)],1)],1)],1)])])},s=[],i=(a("c975"),a("13d5"),a("4e82"),a("498a"),a("e4fd")),o=a("1799"),r=a("7944"),l=(a("5319"),a("0856")),c=a("9b02"),u=a.n(c),d={props:{service:{type:String,required:!0},query:{type:Object,default:null},queryWhen:{type:[Boolean,Function],default:!0},onEmpty:{type:Function,default:null},fetchQuery:{type:Object},params:{type:Object,default:null},fetchParams:{type:Object,default:null},watch:{type:[String,Array],default(){return[]}},local:{type:Boolean,default:!1},editScope:{type:Function,default(t){return t}},qid:{type:String,default(){return Object(l["c"])(10)}},temps:{type:Boolean,default:!1}},data:()=>({isFindPending:!1,queryId:null,pageId:null,items:[]}),computed:{pagination(){return this.$store.state[this.service].pagination[this.qid]},queryInfo(){return null==this.pagination||null==this.queryId?{}:u()(this.pagination,this.queryId,{})},pageInfo(){return null==this.pagination||null==this.queryId||null==this.pageId?{}:u()(this.pagination,[this.queryId,this.pageId],{})},scope(){const{items:t,isFindPending:e,pagination:a,queryInfo:n,pageInfo:s}=this,i={isFindPending:e,pagination:a,items:t,queryInfo:n,pageInfo:s};return this.editScope(i)||i}},methods:{findData(){const t=this.fetchQuery||this.query;let e=this.fetchParams||this.params;if(("function"===typeof this.queryWhen?this.queryWhen(this.params||this.query):this.queryWhen)&&(this.isFindPending=!0,e||t))return e=e?Object.assign({},e,{qid:this.qid||"default"}):{query:t,qid:this.qid||"default"},this.$store.dispatch(`${this.service}/find`,e).then((t=>{this.isFindPending=!1;const{queryId:a,pageId:n}=Object(l["b"])(e,t);this.queryId=a,this.pageId=n,this.items=t.data,0===t.total&&this.onEmpty&&this.onEmpty()}))},fetchData(){if(!this.local){if(this.params||this.query)return this.findData();console.log("No query and no id provided, so no data will be fetched.")}}},created(){if(!this.$FeathersVuex)throw new Error("You must first Vue.use the FeathersVuex plugin before using the 'FeathersVuexFind' component.");if(!this.$store.state[this.service])throw new Error(`The '${this.service}' plugin not registered with feathers-vuex`);const t=Array.isArray(this.watch)?this.watch:[this.watch];(this.fetchQuery||this.query||this.params)&&(t.forEach((t=>{if("string"!==typeof t)throw new Error("Values in the 'watch' array must be strings.");this.fetchQuery&&t.startsWith("query")&&(t=t.replace("query","fetchQuery")),this.fetchParams&&t.startsWith("params")&&(t=t.replace("params","fetchParams")),this.$watch(t,this.fetchData)})),this.fetchData())},render(){return this.$scopedSlots.default(this.scope)}};const p={render(){return this.$scopedSlots.default(this.$attrs)}},f=(t,e)=>{if(t)for(const a in t){const n=t[a];if(e===n.visual){const t=n.dates,e=[];for(const a in t){const n=t[a];e.push({k:a,v:parseInt(n)})}return e.sort(((t,e)=>{const a=t.v,n=e.v;return a>n?-1:a>n?1:0})),e}}return[]};var m={name:"PageSentence",components:{Pagination:o["a"],Pass:p,FeathersVuexFindOrDefault:d},props:{id:{type:String,required:!0}},watch:{id(t,e){this.state.lineId=t,this.loadData()}},setup(t,e){const{Atom:a,Visual:n,Translation:s,Tv:o,Roots:l}=e.root.$FeathersVuex.api,c=Object(i["reactive"])({editable:!0,language2:"ru",language3:"rus",tab:"visual",corpusId:"",lineId:t.id,split:[],position:{data:{},pos:-1},lineNumber:"",original:"",transliteration:"",doReset:!0,cuneiform:"",over:"",highlightCuneiform:Object(i["computed"])((()=>{if(c.over){const e=(c.translation||{}).details||[];var t=0;for(const a in e){const n=e[a];if(c.over===n)return[t,t+Array.from((n.cuneiform||{}).text||"").length-1];t+=Array.from((n.cuneiform||{}).text||"").length}}return[-1,-1]}))}),u=t=>{const e=c.highlightCuneiform||[-1,-1];return t>=e[0]&&t<=e[1]},d=()=>{c.corpusId="",c.split=[],c.position={data:{},pos:-1},c.lineNumber="",c.original="",c.transliteration="",c.doReset=!0},p=t=>{d(),c.split=t},m=()=>{const t=c.lineId;t&&a.find({query:{class:"line",id:t,$sort:{createdAt:1},$limit:25}}).then((t=>{const e=((t||{}).data||[])[0]||{};c.corpusId=e.corpusId||"",c.lineNumber=e.number||"?",c.original=e.original||""}))};m();const{items:v}=Object(r["a"])({model:s,params:Object(i["computed"])((()=>({query:{version:"draft",lineId:c.lineId,language:"sumerian"}}))),queryWhen:Object(i["computed"])((()=>c.lineId)),onEmpty:()=>{if(c.lineId){const t=new s({version:"draft",lineId:c.lineId,language:"sumerian",update:"reset"});t.create()}}}),b=Object(i["computed"])((()=>{const t=v.value[0];return t&&(c.translation=t),t||{}})),{items:h}=Object(r["a"])({model:o,params:Object(i["computed"])((()=>({query:{version:"draft",lineId:c.lineId,language:"sumerian"}}))),queryWhen:Object(i["computed"])((()=>c.lineId)),onEmpty:()=>{if(c.lineId){const t=new o({version:"draft",lineId:c.lineId,language:"sumerian",text:""});t.create()}}}),g=Object(i["computed"])((()=>{const t=h.value[0]||{};return t&&t.clone?t.clone():t})),y=Object(i["computed"])((()=>{const t=b.value,e=t.transliteration||"";return c.original=t.cuneiform,e})),q=Object(i["computed"])((()=>{const t=c.position||{};return"root"===t.type?((t.data||{}).cuneiform||{}).text:""})),_=Object(i["computed"])((()=>{const t=c.position||{};return"root"===t.type?((t.data||{}).cuneiform||{}).lemma:""})),{items:k}=Object(r["a"])({model:l,params:Object(i["computed"])((()=>({query:{symbols:q.value,language:"sumerian"}}))),queryWhen:Object(i["computed"])((()=>q.value))}),{items:x}=Object(r["a"])({model:n,params:Object(i["computed"])((()=>({query:{visual:_.value,$limit:50},paginate:!1}))),queryWhen:_}),I=Object(i["computed"])((()=>{const t=x.value;if(t){const e=[];return t.forEach((t=>{const a=t.visual,n=t.normaliazed;t.meanings&&t.meanings.forEach((t=>{let s=0,i=0;(t.trans||[]).forEach((t=>{i+=t.count||0}));const o=f(t.cuneiforms,a);o.forEach((t=>{"UrIII"!==t.k&&"OB"!==t.k||(s+=parseInt(t.v))}));const r={ref:t._id,lemma:t.lemma,pos:t.pos,trans:t.trans,visual:a,normaliazed:n,dates:o,count:s,total:i};e.push(r)}))})),e.sort(((t,e)=>{const a=t.count||0,n=e.count||0,s=t.total||0,i=e.total||0;return a>n?-1:a<n?1:s>i?-1:s<i?1:0})),e}return[]})),j=(t,e)=>{const a=b.value;if(t&&t.ref&&e&&a){const n=a.clone(),s=n.details,i=s[c.position.pos];i&&(e.ref?(i.label="",i.pos=t.pos,i.meaningId=t.ref,i.senseId=e.ref,n.update="nothing",n.save()):e.label&&(i.label=e.label,i.pos=t.pos,i.meaningId=t.ref,i.senseId="",n.update="nothing",n.save()))}},O=(t,e)=>{const a=t||"";if(a!==e){const t=g.value;t.text=a,t.save()}},w=(t,e)=>{console.log("updateCuneiform",t,e);const a=t||"";if(a!==e&&a){const t=b.value.clone();t.update={cuneiform:a},t.save(),d()}c.cuneiform=""},$=(t,e)=>{const a=t||"";if(a!==e){const t=b.value.clone();t.update={transliteration:a},t.save(),c.doReset=a,d()}},C=()=>{const t=b.value.clone();t.update="reset",t.save(),c.doReset=!0,d()},P=(t,e,a)=>{const n=t.map((t=>a[t]||"?")).reduce(((t,e)=>t+" "+(e||"")),"").trim(),s=((b.value||{}).details||[]).map((t=>t===e?n:t.text)).reduce(((t,e)=>t+" "+(e||"")),"").trim();$(s,c.transliteration)},S=t=>Object(i["computed"])((()=>"object"===typeof t&&null!==t?t[c.language2]:t));return{state:c,loadData:m,resetSelections:d,selectSplit:p,roots:k,visualText:q,visuals:x,visualVariants:I,transliteration:y,translation:b,selectTranslation:j,updateTransliteration:$,resetTransliteration:C,isCuneiformHighlighted:u,updateCuneiform:w,tv:g,updateTv:O,splitBy:P,phLabel:S}},methods:{arrayToVisual(t){const e=[];return t.forEach((t=>{e.push(t)})),e.join(" • ")},toVisual(t){const e=[];return t.forEach((t=>{e.push(t.visual)})),e.join(" • ")},toText(t){const e=[];return t.forEach((t=>{e.push(t.text)})),e.join(" ")},toTrans(t){const e=[];return t.forEach((t=>{e.push(t.trans)})),e.join(" ")},checkForError(t){const e=(t.text||"").indexOf(t.lemma);return-1===e},label(t,e){return e||(t&&(t[this.state.language3]||t.label)||"")},pcToString(t){const e=100*(t||0);return e.toString().substring(0,4)},checkLabel(t){t.label||(t.label=((t.data||{}).sense||{})[this.state.language3]||"")},formatLemma(t){const e=t.lemma;let a=t.text||t.data.text;a=a.replaceAll("<","_").replaceAll(">","_").replaceAll("/>","_");const n=a.indexOf(e);return-1===n?a+="<small> ["+t.lemma+"] </small>":a=a.substring(0,n)+"<b>"+e+"</b>"+a.substring(n+e.length),a},switchLang(t){var e=t;switch(e){case"rus":e="ru";break;case"eng":e="en";break}this.$i18n.locale=e,this.state.language2=e}},mounted(){const t=(navigator.language||navigator.userLanguage||"en").split("-")[0];switch(this.$i18n.locale=t,this.$i18n.locale){case"ru":this.state.language2="ru",this.state.language3="rus";break;case"en":this.state.language2="en",this.state.language3="eng";break}}},v=m,b=(a("5416"),a("2877")),h=a("9989"),g=a("9c40"),y=a("2c91"),q=a("6a67"),_=a("42a1"),k=a("27f9"),x=a("0016"),I=a("eb85"),j=a("eaac"),O=a("58a81"),w=a("4e73"),$=a("1c1c"),C=a("66e5"),P=a("4074"),S=a("3786"),T=a("4983"),Q=a("429b"),E=a("7460"),F=a("adad"),V=a("823b"),A=a("eebe"),L=a.n(A),D=Object(b["a"])(v,n,s,!1,null,null,null);e["default"]=D.exports;L()(D,"components",{QPage:h["a"],QBtn:g["a"],QSpace:y["a"],QBtnToggle:q["a"],QPopupEdit:_["a"],QInput:k["a"],QIcon:x["a"],QSeparator:I["a"],QTable:j["a"],QBadge:O["a"],QMenu:w["a"],QList:$["a"],QItem:C["a"],QItemSection:P["a"],QRadio:S["a"],QScrollArea:T["a"],QTabs:Q["a"],QTab:E["a"],QTabPanels:F["a"],QTabPanel:V["a"]})}}]);
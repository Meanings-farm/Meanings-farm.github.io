(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0856":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return l}));var n=a("3eea"),i=a.n(n),s=a("f71e"),o=a.n(s);function r(t){let e="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}function c(t,e,a){const{queryId:n,pageId:i}=e,s=t[n],o=s&&s[i],r=o&&o.ids;return r&&r.length?r.map((t=>a[t])):[]}function l(t={},e={}){const a=t.query||{},n=t.qid||"default",s=null!==e.limit&&void 0!==e.limit?e.limit:a.$limit,r=null!==e.skip&&void 0!==e.skip?e.skip:a.$skip,c=i()(a,["$limit","$skip"]),l=o()(c),u=void 0!==s?{$limit:s,$skip:r}:void 0,d=u?o()(u):void 0;return{qid:n,query:a,queryId:l,queryParams:c,pageParams:u,pageId:d,response:void 0,isOutdated:void 0}}},1799:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{flat:"",icon:"navigate_before",disabled:!t.havePrev},on:{click:function(e){t.goTo("/sumerian/line/",(t.prev||{}).id)}}}),a("q-btn",{attrs:{flat:"",icon:"reorder",disabled:!t.haveCorpusId},on:{click:function(e){return t.goTo("/text/",t.corpusId)}}}),a("q-btn",{attrs:{flat:"",icon:"navigate_next",disabled:!t.haveNext},on:{click:function(e){t.goTo("/sumerian/line/",(t.next||{}).id)}}})],1)},i=[],s=a("e4fd"),o=a("7944"),r={name:"Pagination",props:{corpusId:{type:String,required:!1},currentId:{type:String,required:!1}},setup(t,e){const{List:a}=e.root.$FeathersVuex.api,{$router:n}=e.root,i=Object(s["computed"])((()=>t.corpusId)),r=Object(s["computed"])((()=>void 0!==l.value)),{items:c}=Object(o["a"])({model:a,params:Object(s["computed"])((()=>({query:{id:i.value,$sort:{createdAt:1},$limit:1}}))),queryWhen:Object(s["computed"])((()=>i.value))}),l=Object(s["computed"])((()=>t.currentId)),u=Object(s["computed"])((()=>{const t=l.value;if(t){var e;const a=(c.value||[])[0];if(a&&a.items){const n=a.items;for(const a in n){const i=n[a];if(i.id===t)return e;e=i}}}})),d=Object(s["computed"])((()=>void 0!==u.value)),p=Object(s["computed"])((()=>{const t=l.value;if(t){var e=!1;const a=(c.value||[])[0];if(a&&a.items){const n=a.items;for(const a in n){const i=n[a];if(e)return i;i.id===t&&(e=!0)}}}})),b=Object(s["computed"])((()=>void 0!==p.value)),m=(t,e)=>{n.push({path:t+e})};return{haveCorpusId:r,havePrev:d,prev:u,haveNext:b,next:p,goTo:m}}},c=r,l=a("2877"),u=a("9c40"),d=a("eebe"),p=a.n(d),b=Object(l["a"])(c,n,i,!1,null,null,null);e["a"]=b.exports;p()(b,"components",{QBtn:u["a"]})},7944:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("e4fd"),i=a("b047"),s=a.n(i),o=a("0856");const r=t=>Object(n["isRef"])(t)?t.value:t;function c(t){const e={model:null,params:null,qid:"default",queryWhen:Object(n["computed"])((()=>!0)),local:!1,immediate:!0,onEmpty:null},{model:a,params:i,queryWhen:c,qid:l,local:u,immediate:d,onEmpty:p}=Object.assign({},e,t),b=e=>{const a=r(e);if(a)return a;const n=r(t.fetchParams);if(n)return n;const i=r(t.params);return i||void 0},m=Object(n["reactive"])({qid:l||"",isPending:!1,haveBeenRequested:!1,haveLoaded:u||!1,error:null,debounceTime:0,latestQuery:null,isLocal:u||!1}),v={items:Object(n["computed"])((()=>{const t=r(i);if(a&&t){if(t.paginate){const e=a.store.state[a.servicePath],{defaultSkip:n,defaultLimit:i}=e.pagination,s=t.query||{},r=s.$skip||n,c=s.$limit||i,l=v.paginationData.value[t.qid||m.qid]||{},u=null!=r&&null!=c?{limit:c,skip:r}:{},d=Object(o["b"])(t,u),p=Object(o["a"])(l,d,e.keyedById);return console.log("items",p),p}{const e=a.findInStore(t).data;return e}}return[]})),paginationData:Object(n["computed"])((()=>{if(a)return a.store.state[a.servicePath].pagination})),servicePath:Object(n["computed"])((()=>(a||{}).servicePath||""))};function f(t){if(a&&t){const e=r(t);if(e&&c&&c.value&&!m.isLocal)return m.isPending=!0,m.haveBeenRequested=!0,a.find(e).then((t=>{if(m.error=null,m.haveLoaded=!0,!Array.isArray(t)){const a=Object(o["b"])(e,t);a.response=t,a.isOutdated=!1,m.latestQuery=a}return m.isPending=!1,0==t.total&&p&&p(),t}))}}const g={findDebounced(t){return f(t)}};function h(t){const e=b(t);return e&&e.debounce?(e.debounce!==m.debounceTime&&(g.findDebounced=s()(f,e.debounce),m.debounceTime=e.debounce),g.findDebounced(e)):e?f(e):void 0}return Object(n["watch"])((()=>b()),(()=>{h()}),{immediate:d}),Object.assign(Object.assign(Object.assign({},v),Object(n["toRefs"])(m)),{find:f})}},ae3c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row justify-center"},[a("q-btn",{attrs:{flat:"",round:"",icon:"edit",color:t.state.editable?"primary":"secondary"},on:{click:function(e){t.state.editable=!t.state.editable}}}),a("q-space"),a("Pagination",{attrs:{corpusId:t.state.corpusId,currentId:t.state.lineId}}),a("q-space"),a("q-btn-toggle",{attrs:{"no-caps":"",rounded:"",unelevated:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"rus",value:"rus"},{label:"eng",value:"eng"}]},on:{input:function(e){return t.switchLang(e)}},model:{value:t.state.language3,callback:function(e){t.$set(t.state,"language3",e)},expression:"state.language3"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-7"},[a("div",{staticClass:"row full-width q-py-sm"},[t._v("\n        "+t._s(t.$t("line"))+"# "+t._s(t.state.lineNumber)+"\n      ")]),a("div",{staticClass:"row full-width q-pb-sm"},[a("div",{staticClass:"fit text-h5",attrs:{filled:""}},[t._v("\n          "+t._s(t.state.original)+"\n          ")])]),a("q-separator"),t._l(t.translation.details||[],(function(e,n){return[a("span",{key:n,on:{mouseover:function(a){t.state.over=e},mouseleave:function(e){t.state.over=""}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-2 text-body1 cursor-pointer",class:{warning:t.checkForError(e)},on:{click:function(a){t.state.position={data:e,pos:n,type:"root"}}}},[a("span",{staticClass:"text-body1",class:{selected:(t.state.position||{}).data===e},domProps:{innerHTML:t._s(t.formatLemma(e))}})]),a("div",{staticClass:"col-auto text-body1"},t._l(t.label(e.data,e.label).split("\n"),(function(e,n){return a("div",{key:"s"+n,staticClass:"text-body1"},[t._v("\n                "+t._s(e)+"\n              ")])})),0)]),a("q-separator")],1)]}))],2),a("div",{staticClass:"col-5"},[a("q-tabs",{staticClass:"text-grey bg-grey-3",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:t.state.tab,callback:function(e){t.$set(t.state,"tab",e)},expression:"state.tab"}},[a("q-tab",{attrs:{name:"visual",label:t.$t("vocablary")}},[a("q-badge",{attrs:{color:"red",floating:""}},[t._v(t._s(t.visualVariants.length))])],1)],1),a("q-tab-panels",{attrs:{animated:"",swipeable:"",vertical:"","transition-prev":"jump-right","transition-next":"jump-left"},model:{value:t.state.tab,callback:function(e){t.$set(t.state,"tab",e)},expression:"state.tab"}},[a("q-tab-panel",{attrs:{name:"visual"}},[a("q-scroll-area",{staticStyle:{height:"500px","max-width":"100%"}},t._l(t.visualVariants,(function(e,n){return a("div",{key:n,staticClass:"row"},[a("div",{staticClass:"col-3 text-body1"},[a("q-separator"),t._v("\n                "+t._s(e.lemma)+" "+t._s(e.pos)+"\n                "),a("div",[a("a",{staticClass:"cursor-pointer",on:{click:function(a){return t.openSearch(e.visual)}}},[t._v(t._s(e.visual))]),t._v(" "+t._s(e.normaliazed)+" ")]),t._l(e.dates||[],(function(e,n){return a("small",{key:n,staticClass:"row"},["UrIII"===e.k||"OB"===e.k?a("b",[t._v("\n                    "+t._s(e.k)+" "+t._s(e.v)+"\n                  ")]):a("span",[t._v("\n                    "+t._s(e.k)+" "+t._s(e.v)+"\n                  ")])])}))],2),a("div",{staticClass:"col text-body1"},[a("q-separator"),t._l(e.trans,(function(n,i){return a("div",{key:i,staticClass:"row cursor-pointer",on:{click:function(a){return t.selectTranslation(e,n)}}},[t._v("\n                  "+t._s(t.label(n.labels))+"\n                  "),n.count?a("span",[t._v(" Â  "+t._s(n.count)+" / "+t._s(t.pcToString(n.pc))+"%")]):t._e()])}))],2)])})),0)],1)],1)],1)])])},i=[],s=a("e4fd"),o=a("1799"),r=a("7944"),c={name:"PageHebrewLine",components:{Pagination:o["a"]},props:{id:{type:String,required:!0}},watch:{id(t,e){this.state.lineId=t,this.loadData()}},setup(t,e){const{Atom:a,Translation:n,Hebrew:i}=e.root.$FeathersVuex.api,o=Object(s["reactive"])({editable:!0,language2:"ru",language3:"rus",tab:"visual",corpusId:"",lineId:t.id,split:[],position:{data:{},pos:-1},lineNumber:"",original:""}),c=()=>{const t=o.lineId;t&&a.find({query:{class:"line",id:t,$sort:{createdAt:1},$limit:25}}).then((t=>{const e=((t||{}).data||[])[0]||{};o.corpusId=e.corpusId||"",o.lineNumber=e.number||"?",o.original=e.original||""}))};c();const{items:l}=Object(r["a"])({model:n,params:Object(s["computed"])((()=>({query:{version:"draft",lineId:o.lineId,language:"hebrew"}}))),queryWhen:Object(s["computed"])((()=>o.lineId)),onEmpty:()=>{if(o.lineId){const t=new n({version:"draft",lineId:o.lineId,language:"hebrew",update:"reset"});t.create()}}}),u=Object(s["computed"])((()=>{const t=l.value[0];return console.log("translation",t),t&&(o.translation=t),t||{}})),d=Object(s["computed"])((()=>{const t=o.position||{};return console.log("p",t),"root"===t.type?((t.data||{}).cuneiform||{}).lemma:""})),{items:p}=Object(r["a"])({model:i,params:Object(s["computed"])((()=>({query:{visual:d.value,$limit:50},paginate:!1}))),queryWhen:d}),b=Object(s["computed"])((()=>(console.log("visuals",p),[])));return{state:o,translation:u,visualVariants:b}},methods:{checkForError(t){return!1},label(t,e){if(e)return e;const a=((((t||{}).strong||{}).trans||[])[0]||{}).labels;return a&&(a[this.state.language3]||a.label)||""},formatLemma(t){return t.word}}},l=c,u=a("2877"),d=a("9989"),p=a("9c40"),b=a("2c91"),m=a("6a67"),v=a("42a1"),f=a("27f9"),g=a("0016"),h=a("eb85"),y=a("58a81"),q=a("4e73"),j=a("1c1c"),O=a("66e5"),_=a("4074"),I=a("3786"),k=a("4983"),w=a("429b"),x=a("7460"),C=a("adad"),Q=a("823b"),$=a("eebe"),P=a.n($),T=Object(u["a"])(l,n,i,!1,null,null,null);e["default"]=T.exports;P()(T,"components",{QPage:d["a"],QBtn:p["a"],QSpace:b["a"],QBtnToggle:m["a"],QPopupEdit:v["a"],QInput:f["a"],QIcon:g["a"],QSeparator:h["a"],QBadge:y["a"],QMenu:q["a"],QList:j["a"],QItem:O["a"],QItemSection:_["a"],QRadio:I["a"],QScrollArea:k["a"],QTabs:w["a"],QTab:x["a"],QTabPanels:C["a"],QTabPanel:Q["a"]})}}]);
"use strict";(self["webpackChunkmeanings_farm"]=self["webpackChunkmeanings_farm"]||[]).push([[607],{3607:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(3673);const l={class:"q-pa-md",style:{"max-width":"800px"}};function i(e,t,a,i,o,s){const r=(0,n.up)("SectionText"),u=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(u,null,{default:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n.Wm)(r,{listId:i.listId,page:a.page,rowsPerPage:a.rowsPerPage},null,8,["listId","page","rowsPerPage"])])])),_:1})}var o=a(1959);const s={class:"row"},r={class:"row justify-center q-mt-md"};function u(e,t,a,l,i,o){const u=(0,n.up)("q-space"),d=(0,n.up)("q-btn"),p=(0,n.up)("q-pagination"),g=(0,n.up)("q-table");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",s,[(0,n.Wm)(u),(0,n.Wm)(d,{flat:"",label:l.state.mode,color:"primary",onClick:l.toggleMode},null,8,["label","onClick"])]),(0,n._)("div",r,[(0,n.Wm)(p,{modelValue:l.state.page,"onUpdate:modelValue":t[0]||(t[0]=e=>l.state.page=e),color:"grey-8",max:l.pagesNumber,size:"sm",onInput:t[1]||(t[1]=e=>l.updatePagination(e))},null,8,["modelValue","max"])]),(0,n.Wm)(g,{title:l.state.label,data:l.state.items,columns:i.columns,"row-key":"_id","visible-columns":l.state.visibleColumns,"hide-header":"",onRowClick:l.onclick,onRequest:l.loadData,loading:l.state.loading,pagination:l.state.pagination,"onUpdate:pagination":t[2]||(t[2]=e=>l.state.pagination=e),"hide-pagination":""},null,8,["title","data","columns","visible-columns","onRowClick","onRequest","loading","pagination"])])}a(7280),a(5363);const d={name:"SectionText",components:{},props:{listId:{type:String,required:!0},page:{type:Number,required:!1,default:0}},data(){return{columns:[{name:"number",align:"right",label:"",field:"number",style:"width: 100px",sortable:!1},{name:"original",align:"left",label:"",field:"original",sortable:!1},{name:"transliteration",align:"left",label:"",field:"transliteration",sortable:!1}]}},setup(e,t){const{ListV:a}=t.root.$FeathersVuex.api,{$route:l,$router:i}=t.root,s=(0,o.Fl)((()=>e.listId)),r=(0,o.Fl)((()=>e.page)),u=(0,o.Fl)((()=>10)),d=(0,o.qj)({mode:"transliteration",visibleColumns:["number","transliteration"],loading:!1,label:"",items:[],page:r.value,total:0,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:u.value}}),p=(0,o.Fl)((()=>Math.ceil(d.total/u.value))),g=()=>{"original"===d.mode?(d.mode="transliteration",d.visibleColumns=["number","transliteration"]):(d.mode="original",d.visibleColumns=["number","original"])},m=function(e,t,a){const n=t.id;i.push({path:`/sumerian/line/${n}`})},c=function(e){const t=s.value;if(t){const a=`/sumerian/text/${t}/${u.value}/${e}`;l.path!==a&&i.replace({path:a})}},b=e=>{const t=d.page||1,n=u.value,l=n*(t-1);t>0&&(d.loading=!0,a.find({query:{listId:s.value,$limit:n,$skip:l}}).then((e=>{const t=(e||{}).data||[];d.items.splice(0,d.items.length),t.forEach(((e,t)=>{d.items.push(e)})),d.total=e.total,d.loading=!1})).catch((e=>{console.log("err",e),d.loading=!1})))};return b(),(0,n.YP)((()=>e.page),((e,t)=>b())),(0,n.YP)((()=>e.listId),((e,t)=>b())),{state:d,toggleMode:g,onclick:m,updatePagination:c,pagesNumber:p,loadData:b}}};var p=a(4260),g=a(2025),m=a(4607),c=a(7300),b=a(9068),f=a(7518),v=a.n(f);const h=(0,p.Z)(d,[["render",u]]),w=h;v()(d,"components",{QSpace:g.Z,QBtn:m.Z,QPagination:c.Z,QTable:b.Z});const P={name:"PageCatalog",components:{SectionText:w},props:{id:{type:String,required:!0},page:{type:Number,required:!1,default:0},rowsPerPage:{type:Number,required:!1,default:10}},setup(e,t){const a=(0,o.Fl)((()=>e.id));return{listId:a}}};var q=a(4379);const y=(0,p.Z)(P,[["render",i]]),k=y;v()(P,"components",{QPage:q.Z})}}]);